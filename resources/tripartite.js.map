{"version":3,"file":"tripartite.js","mappings":"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","sources":["webpack://@webhandle/tripartite-renderer/./node_modules/tripartite/active-element.js","webpack://@webhandle/tripartite-renderer/./node_modules/tripartite/calculate-relative-path.js","webpack://@webhandle/tripartite-renderer/./node_modules/tripartite/evaluate-in-context.js","webpack://@webhandle/tripartite-renderer/./node_modules/tripartite/execution-context.js","webpack://@webhandle/tripartite-renderer/./node_modules/tripartite/resolve-data-path.js","webpack://@webhandle/tripartite-renderer/./node_modules/tripartite/tripartite.js","webpack://@webhandle/tripartite-renderer/webpack/bootstrap","webpack://@webhandle/tripartite-renderer/webpack/runtime/define property getters","webpack://@webhandle/tripartite-renderer/webpack/runtime/global","webpack://@webhandle/tripartite-renderer/webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["\nconst defaultTemplateName = 'defaultTemplate'\n\nclass ActiveElement {\n\tconstructor(conditionalExpression, dataExpression, handlingExpression, tripartite) {\n\t\tthis.conditionalExpression = conditionalExpression\n\t\tthis.dataExpression = dataExpression\n\t\tthis.handlingExpression = handlingExpression || defaultTemplateName\n\t\tthis.tripartite = tripartite\n\t}\n}\n\nmodule.exports = ActiveElement","var calculateRelativePath = function(parentPath, currentPath) {\n\tif(!parentPath) {\n\t\treturn currentPath\n\t}\n\tif(!currentPath) {\n\t\treturn currentPath\n\t}\n\t\n\tif(currentPath.indexOf('../') != 0 && currentPath.indexOf('./') != 0) {\n\t\treturn currentPath\n\t}\n\t\n\tvar pparts = parentPath.split('/')\n\tvar cparts = currentPath.split('/')\n\t\n\t// trim any starting blank sections\n\twhile(pparts.length && !pparts[0]) {\n\t\tpparts.shift()\n\t}\n\twhile(cparts.length && !cparts[0]) {\n\t\tcparts.shift()\n\t}\n\t\n\tif(currentPath.indexOf('../') == 0 ) {\n\t\twhile(cparts.length && cparts[0] == '..') {\n\t\t\tpparts.pop()\n\t\t\tcparts.shift()\n\t\t}\n\t\tpparts.pop()\n\t\t\n\t\twhile(cparts.length) {\n\t\t\tpparts.push(cparts.shift())\n\t\t}\n\t\treturn pparts.join('/')\n\t}\n\tif(currentPath.indexOf('./') == 0 ) {\n\t\tcparts.shift()\n\t\tpparts.pop()\n\t\twhile(cparts.length) {\n\t\t\tpparts.push(cparts.shift())\n\t\t}\n\t\treturn pparts.join('/')\n\t}\n\t\n\treturn currentPath\n}\n\nmodule.exports = calculateRelativePath","\nconst resolveDataPath = require('./resolve-data-path')\nfunction evaluateInContext(context, expression, dataFunctions, globalData) {\n\tif (!expression) {\n\t\treturn null\n\t}\n\tif (typeof expression === 'string') {\n\t\texpression = expression.trim()\n\t}\n\n\tif (expression === '$this' || expression === 'this') {\n\t\treturn context\n\t}\n\tif (typeof context === 'object' && expression in context) {\n\t\treturn context[expression]\n\t}\n\tif (expression === '\"\"' || expression === \"''\") {\n\t\treturn ''\n\t}\n\tlet resolved = resolveDataPath(context, expression)\n\tif (resolved === null || resolved === undefined) {\n\t\tresolved = resolveDataPath({\n\t\t\t'$globals': globalData\n\t\t}, expression)\n\t}\n\tif (resolved === null || resolved === undefined) {\n\t\tresolved = _evaluateInContext.call(context, context, expression, dataFunctions, globalData)\n\t}\n\treturn resolved\n}\n\nlet evalFunction = new Function('additionalContexts',\n\t`with ({\n\t\t'$globals': additionalContexts.globalData\n\t}) {\n\t\twith (additionalContexts.dataFunctions) {\n\t\t\twith (additionalContexts.context) {\n\t\t\t\ttry {\n\t\t\t\t\treturn eval(additionalContexts.expression);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}`\n)\n\nfunction _evaluateInContext(context, expression, dataFunctions, globalData) {\n\tdataFunctions = dataFunctions || {}\n\tglobalData = globalData || {}\n\n\n\tlet result = evalFunction.call(this, {\n\t\tglobalData: globalData\n\t\t, dataFunctions: dataFunctions\n\t\t, context: context\n\t\t, expression: expression\n\t})\n\treturn result\n}\n\nmodule.exports = evaluateInContext","\nlet ActiveElement = require('./active-element')\nvar calculateRelativePath = require('./calculate-relative-path')\nlet evaluateInContext = require('./evaluate-in-context')\n\nclass ExecutionContext {\n\t/**\n\t * \n\t * @param {Tripartite} tripartite \n\t * @param {function} template \n\t * @param {stream} [destination]\n\t */\n\tconstructor(tripartite, template, data = {}, destination = '', dataFunctions = {}) {\n\t\tthis.tripartite = tripartite\n\t\tthis.template = template\n\t\tthis.destination = destination\n\t\tthis.initialData = data\n\t\tthis.currentData = []\n\t\tthis.dataFunctions = dataFunctions\n\t\tthis.continueOnTripartiteError = true\n\t\t\n\t\t// Sometimes large pages have so many elements that we exceed\n\t\t// the maximum call depth. This happens when we have a lot of elements all being\n\t\t// rendered by the same templates. That is, there's no async callback when a template\n\t\t// is loaded, only instant callbacks.\n\t\t// The downside to doing very frequent async calls is that it takes a lot longer to\n\t\t// to get called from a setTimeout than it does to call directly. We want ot keep\n\t\t// the time between needing to do that reasonably long. Unfortunately, there's no\n\t\t// easy/fast way to detect the call stack depth, so we rely on this proxy.\n\t\tthis.callCount = 0\n\t\tthis.callDepthLimit = 1000\n\t}\n\n\t/**\n\t * \n\t * @param {function} [callback] called when done\n\t * @returns Returns the string of stream as the result of the operation\n\t */\n\trun(callback) {\n\t\tlet ourCallback\n\t\tif (callback) {\n\t\t\tourCallback = () => {\n\t\t\t\tcallback(null, this.destination)\n\t\t\t}\n\t\t}\n\n\t\tthis._run(this.template, this.initialData, ourCallback)\n\n\t\treturn this.destination\n\t}\n\n\t_resolveHandlingExpression(template, handlingExpression, data) {\n\t\tif (!handlingExpression) {\n\t\t\thandlingExpression = defaultTemplateName\n\t\t}\n\t\tif (handlingExpression.charAt(0) == '$') {\n\t\t\t// Indicates the handling espression is not a literal template name but is a string which should\n\t\t\t// be evaluated to determine the template name\n\t\t\thandlingExpression = evaluateInContext(data, handlingExpression.substring(1), this.dataFunctions, this.initialData)\n\t\t}\n\t\t// resolve relative template paths\n\t\tif (handlingExpression.indexOf('./') == 0 || handlingExpression.indexOf('../') == 0) {\n\t\t\thandlingExpression = calculateRelativePath(template.templateMeta.name, handlingExpression)\n\t\t}\n\n\t\treturn handlingExpression\n\t}\n\n\t_run(template, data, callback) {\n\t\tlet parts = [...template.parts].reverse()\n\t\tconst processParts = () => {\n\t\t\t\n\t\t\t// check to see how far down in the call stack we are. If too far down,\n\t\t\t// come back in the next tick.\n\t\t\tthis.callCount++\n\t\t\tif(this.callCount++ > this.callDepthLimit) {\n\t\t\t\tsetTimeout(()=> {\n\t\t\t\t\tthis.callCount = 0\n\t\t\t\t\tprocessParts()\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (parts.length > 0) {\n\t\t\t\tlet part = parts.pop()\n\t\t\t\tif (typeof part === 'string') {\n\t\t\t\t\tthis.output(part)\n\t\t\t\t\tprocessParts()\n\t\t\t\t}\n\t\t\t\telse if (part instanceof ActiveElement) {\n\t\t\t\t\tlet conditional = part.conditionalExpression || part.dataExpression\n\t\t\t\t\tlet conditionalResult = false\n\t\t\t\t\tlet resultData\n\t\t\t\t\tif (conditional == null || conditional == undefined || conditional === '') {\n\t\t\t\t\t\t// Because if they didn't specify a condition or data, they probably \n\t\t\t\t\t\t// just want the template to be run as is\n\t\t\t\t\t\tconditionalResult = true\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif(part.conditionalExpression) {\n\t\t\t\t\t\t\tlet result = evaluateInContext(data, part.conditionalExpression, this.dataFunctions, this.initialData)\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\tconditionalResult = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// This means we're evaluating the data expression to see if we should run the template\n\t\t\t\t\t\t\tresultData = evaluateInContext(data, part.dataExpression, this.dataFunctions, this.initialData)\n\t\t\t\t\t\t\tif(resultData === null || resultData === undefined) {\n\t\t\t\t\t\t\t\tconditionalResult = false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (typeof resultData === 'number') {\n\t\t\t\t\t\t\t\t// if the result is a number, any number, we want to output it\n\t\t\t\t\t\t\t\t// unless the number is from the conditional expression, in which\n\t\t\t\t\t\t\t\t// case we want to evaluate it as truthy\n\t\t\t\t\t\t\t\tconditionalResult = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(Array.isArray(resultData) && resultData.length > 0) {\n\t\t\t\t\t\t\t\tconditionalResult = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(resultData) {\n\t\t\t\t\t\t\t\tconditionalResult = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (conditionalResult) {\n\t\t\t\t\t\tif (part.dataExpression && resultData === undefined) {\n\t\t\t\t\t\t\tresultData = evaluateInContext(data, part.dataExpression, this.dataFunctions, this.initialData)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif((resultData === null || resultData === undefined) && !part.dataExpression) {\n\t\t\t\t\t\t\t// we only want use the context data for the template data if we didn't have a data expression\n\t\t\t\t\t\t\tresultData = data\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet handlingExpression = this._resolveHandlingExpression(template, part.handlingExpression, data)\n\t\t\t\t\t\tlet handlingTemplate\n\t\t\t\t\t\tlet children = (Array.isArray(resultData) ? [...resultData] : [resultData]).reverse()\n\t\t\t\t\t\tconst applyTemplate = () => {\n\t\t\t\t\t\t\tif (children.length > 0) {\n\t\t\t\t\t\t\t\tlet child = children.pop()\n\t\t\t\t\t\t\t\tthis._run(handlingTemplate, child, () => {\n\t\t\t\t\t\t\t\t\tapplyTemplate()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(handlingExpression in this.tripartite.templates) {\n\t\t\t\t\t\t\thandlingTemplate = this.tripartite.getTemplate(handlingExpression)\n\t\t\t\t\t\t\tif (handlingTemplate) {\n\t\t\t\t\t\t\t\tapplyTemplate()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// the template has been loaded before but is empty\n\t\t\t\t\t\t\t\tif (this.continueOnTripartiteError) {\n\t\t\t\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.tripartite.loadTemplate(handlingExpression, (template) => {\n\t\t\t\t\t\t\t\tif (!template) {\n\t\t\t\t\t\t\t\t\tlet msg = 'Could not load template: ' + handlingExpression\n\t\t\t\t\t\t\t\t\tconsole.error(msg)\n\t\t\t\t\t\t\t\t\tif (this.continueOnTripartiteError) {\n\t\t\t\t\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tlet err = new Error(msg)\n\t\t\t\t\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\t\t\t\t\tcallback(err)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\tthrow err\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\thandlingTemplate = template\n\t\t\t\t\t\t\t\t\tapplyTemplate()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (typeof part === 'function') {\n\t\t\t\t\tif(part.write) {\n\t\t\t\t\t\tpart.write(data, this.destination, () => {\n\t\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t\t})\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.output(part(data))\n\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprocessParts()\n\t}\n\n\t/**\n\t * \n\t * @param {string} value \n\t */\n\toutput(value) {\n\t\tif(value === null || value === undefined) {\n\t\t\treturn\n\t\t}\n\t\tif (typeof this.destination === 'string') {\n\t\t\tthis.destination += value\n\t\t}\n\t\telse if (this.destination.write) {\n\t\t\tthis.destination.write(value)\n\t\t}\n\t}\n}\n\n\nmodule.exports = ExecutionContext","/*\nfunction resolveDataPath(data, path) {\n\tif(data === null || data === undefined) {\n\t\treturn data\n\t}\n\tlet parts\n\tif(typeof path === 'string') {\n\t\tparts = path.trim().split('.')\n\t}\n\telse if(Array.isArray(path)) {\n\t\tparts = path\n\t}\n\t\n\tlet name = parts.shift()\n\tif(name.indexOf(' ') > -1) {\n\t\t// there's a space, which means it's really unlikely it's a property\n\t\treturn null\n\t}\n\tlet child\n\tif(name === 'this' || name === '$this') {\n\t\tchild = data\n\t}\n\telse if(typeof data === 'object') {\n\t\tif(name in data) {\n\t\t\tchild = data[name]\n\t\t}\n\t}\n\tif(parts.length > 0) {\n\t\treturn resolveDataPath(child, parts)\n\t}\n\telse {\n\t\treturn child\n\t}\n} */\nfunction resolveDataPath(data, path) {\n\ttry {\n\t\tif (data === null || data === undefined) {\n\t\t\treturn data\n\t\t}\n\t\tlet parts\n\t\tif (typeof path === 'string') {\n\t\t\tparts = path.trim().split('.')\n\t\t}\n\t\telse if (Array.isArray(path)) {\n\t\t\tparts = path\n\t\t}\n\n\t\twhile (parts.length > 0) {\n\t\t\tlet name = parts.shift()\n\t\t\tif (name.indexOf(' ') > -1) {\n\t\t\t\t// there's a space, which means it's really unlikely it's a property\n\t\t\t\treturn null\n\t\t\t}\n\t\t\tlet child\n\t\t\tif (name === 'this' || name === '$this') {\n\t\t\t\tchild = data\n\t\t\t}\n\t\t\telse if (typeof data === 'object') {\n\t\t\t\tif (name in data) {\n\t\t\t\t\tchild = data[name]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (parts.length == 0) {\n\t\t\t\treturn child\n\t\t\t}\n\t\t\tif (child === null || child === undefined) {\n\t\t\t\treturn null\n\t\t\t}\n\t\t\tdata = child\n\t\t}\n\t}\n\tcatch (e) {\n\t\treturn null\n\t}\n}\n\nmodule.exports = resolveDataPath","\n\n\nif (typeof String.prototype.trim !== 'function') {\n\tString.prototype.trim = function () {\n\t\treturn this.replace(/^\\s+|\\s+$/g, '');\n\t}\n}\n\n\nfunction isStream(stream) {\n\treturn stream !== null\n\t\t&& typeof stream === 'object'\n\t\t&& typeof stream.pipe === 'function';\n}\n\n\nfunction isTemplate(obj) {\n\tif (!obj) {\n\t\treturn false\n\t}\n\tif (typeof obj !== 'function') {\n\t\treturn false\n\t}\n\tif (!obj.write) {\n\t\treturn false\n\t}\n\tif (!obj.parts) {\n\t\treturn false\n\t}\n\tif (!obj.templateMeta) {\n\t\treturn false\n\t}\n\n\treturn true\n}\n\nlet ExecutionContext = require('./execution-context')\nlet ActiveElement = require('./active-element')\n\n\nclass Tripartite {\n\tconstructor(options = {}) {\n\t\tthis.templates = {\n\t\t\tdefaultTemplate: this._makeTemplate(function (thedata) {\n\t\t\t\treturn '' + thedata;\n\t\t\t})\n\t\t}\n\t\tlet { constants = {\n\t\t\ttemplateBoundary: '__',\n\t\t\ttemplateNameBoundary: '##'\n\t\t} } = options\n\t\tthis.constants = constants\n\n\t\t// This object (if set) will receive the template functions parsed from a script\n\t\t// I want to be able to call my templates as global functions, so I've set it\n\t\t// to be the window object\n\t\tthis.secondaryTemplateFunctionObject = options.secondaryTemplateFunctionObject\n\n\t\tthis.loaders = options.loaders || []\n\n\t\tthis.dataFunctions = options.dataFunction || {}\n\t}\n\n\t_makeTemplate(transformationFunction) {\n\t\tif (isTemplate(transformationFunction)) {\n\t\t\treturn transformationFunction\n\t\t}\n\t\tlet tri = this\n\t\tlet f = function (thedata) {\n\t\t\tlet stream = null\n\t\t\tlet options = null\n\t\t\tlet callback = null\n\t\t\tfor (let i = 1; i < arguments.length; i++) {\n\t\t\t\tlet arg = arguments[i]\n\t\t\t\tif (isStream(arg)) {\n\t\t\t\t\tstream = arg\n\t\t\t\t}\n\t\t\t\telse if(typeof arg === 'function') {\n\t\t\t\t\tcallback = arg\n\t\t\t\t}\n\t\t\t\telse if(typeof arg === 'object') {\n\t\t\t\t\toptions = arg\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn f.write(thedata, stream, callback, options)\n\t\t}\n\t\tf.write = function (thedata, stream, callback, options = {}) {\n\t\t\tif(transformationFunction && transformationFunction.write) {\n\t\t\t\t// if it's not a template, but has a write method, invoke the right method directly\n\t\t\t\treturn transformationFunction.write.apply(transformationFunction, arguments)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet dest = stream || ''\n\n\t\t\t\tlet context = new ExecutionContext(tri, f, thedata, dest, tri.dataFunctions)\n\t\t\t\tif (options && 'continueOnTripartiteError' in options) {\n\t\t\t\t\tcontext.continueOnTripartiteError = options.continueOnTripartiteError\n\t\t\t\t}\n\n\t\t\t\treturn context.run(callback)\n\t\t\t}\n\t\t}\n\t\tf.run = async function(data) {\n\t\t\tlet p = new Promise((resolve, reject) => {\n\t\t\t\tf(data, (err, content) => {\n\t\t\t\t\tif(err) {\n\t\t\t\t\t\treject(err)\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tresolve(content)\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t})\n\t\t\treturn p\n\t\t}\n\t\tf.parts = []\n\t\tif (transformationFunction && typeof transformationFunction === 'function') {\n\t\t\tf.parts.push(transformationFunction)\n\t\t}\n\t\tf.templateMeta = {}\n\t\treturn f\n\t}\n\n\taddTemplate(name, template) {\n\t\tif (typeof template === 'string') {\n\t\t\ttemplate = this.parseTemplate(template);\n\t\t}\n\t\telse if (typeof template === 'function') {\n\t\t\ttemplate = this._makeTemplate(template)\n\t\t}\n\n\t\tthis.templates[name] = template;\n\t\ttemplate.templateMeta = template.templateMeta || {}\n\t\ttemplate.templateMeta.name = name\n\t\treturn template;\n\t}\n\n\tcreateBlank() {\n\t\treturn new Tripartite()\n\t}\n\n\tgetTemplate(name) {\n\t\treturn this.templates[name]\n\t}\n\n\tloadTemplate(name, callback) {\n\t\tif (name in this.templates) {\n\t\t\tcallback(this.templates[name])\n\t\t}\n\t\telse {\n\t\t\tlet tri = this\n\t\t\tlet count = this.loaders.length\n\t\t\tlet done = false\n\n\t\t\tif (count == 0) {\n\t\t\t\ttri.templates[name] = null\n\t\t\t\tcallback(tri.getTemplate(name))\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.loaders.forEach(loader => {\n\t\t\t\t\tif (done) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tloader(name, template => {\n\t\t\t\t\t\tif (done) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcount--\n\t\t\t\t\t\tif (template) {\n\t\t\t\t\t\t\tdone = true\n\t\t\t\t\t\t\ttri.addTemplate(name, template)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (count == 0) {\n\t\t\t\t\t\t\tdone = true\n\t\t\t\t\t\t\ttri.templates[name] = null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (done) {\n\t\t\t\t\t\t\tcallback(tri.getTemplate(name))\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\tparseTemplateScript(tx) {\n\t\tvar tks = this.tokenizeTemplateScript(tx);\n\t\t/* current template name */\n\t\tvar ctn = null;\n\t\tfor (var i = 0; i < tks.length; i++) {\n\t\t\tvar token = tks[i];\n\t\t\tif (token.active) {\n\t\t\t\tctn = token.content;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (ctn) {\n\t\t\t\t\tvar template = this.addTemplate(ctn, this.stripTemplateWhitespace(token.content));\n\t\t\t\t\tif (this.secondaryTemplateFunctionObject) {\n\t\t\t\t\t\tthis.secondaryTemplateFunctionObject[ctn] = template;\n\t\t\t\t\t}\n\t\t\t\t\tctn = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstripTemplateWhitespace(txt) {\n\t\tvar i = txt.indexOf('\\n');\n\t\tif (i > -1 && txt.substring(0, i).trim() == '') {\n\t\t\ttxt = txt.substring(i + 1);\n\t\t}\n\t\ti = txt.lastIndexOf('\\n');\n\t\tif (i > -1 && txt.substring(i).trim() == '') {\n\t\t\ttxt = txt.substring(0, i);\n\t\t}\n\t\treturn txt;\n\t}\n\n\t/* simple template */\n\t_createActiveElement(/* conditional expression */ cd, data, /* handling expression */ hd, tripartite, templateMeta) {\n\t\tlet el = new ActiveElement(cd, data, hd, tripartite);\n\t\tel.templateMeta = templateMeta\n\t\treturn el\n\t}\n\tpt(tx) {\n\t\treturn this.parseTemplate(tx)\n\t}\n\t/* parse template */\n\tparseTemplate(tx) {\n\t\tvar tks = this.tokenizeTemplate(tx);\n\t\tlet t = this._makeTemplate()\n\t\tvar templateMeta = t.templateMeta\n\n\t\tfor (let tk of tks) {\n\t\t\tif (tk.active) {\n\t\t\t\tt.parts.push(this.tokenizeActivePart(tk.content, templateMeta));\n\t\t\t}\n\t\t\telse if (tk.content) {\n\t\t\t\tt.parts.push(tk.content);\n\t\t\t}\n\t\t}\n\n\t\treturn t\n\t}\n\n\ttokenizeActivePart(tx, templateMeta) {\n\t\tvar con = null;\n\t\tvar dat = null;\n\t\tvar han = null;\n\n\t\t/* condition index */\n\t\tvar ci = tx.indexOf('??');\n\t\tif (ci > -1) {\n\t\t\tcon = tx.substring(0, ci);\n\t\t\tci += 2;\n\t\t}\n\t\telse {\n\t\t\tci = 0;\n\t\t}\n\n\t\t/* handler index */\n\t\tvar hi = tx.indexOf('::');\n\t\tif (hi > -1) {\n\t\t\tdat = tx.substring(ci, hi);\n\t\t\than = tx.substring(hi + 2);\n\t\t}\n\t\telse {\n\t\t\tdat = tx.substring(ci);\n\t\t}\n\t\treturn this._createActiveElement(con, dat, han, this, templateMeta);\n\t}\n\n\ttokenizeTemplate(tx) {\n\t\treturn this.tokenizeActiveAndInactiveBlocks(tx, this.constants.templateBoundary);\n\t}\n\n\n\t/** tokenize template script */\n\ttokenizeTemplateScript(tx) {\n\t\treturn this.tokenizeActiveAndInactiveBlocks(tx, this.constants.templateNameBoundary);\n\t}\n\n\t/* tokenize active and inactive blocks */\n\ttokenizeActiveAndInactiveBlocks(text, /*Active Region Boundary */ boundary) {\n\t\t/* whole length */\n\t\tlet length = text.length\n\n\t\t/* current position */\n\t\tlet position = 0\n\n\t\t/* are we in an active region */\n\t\tlet act = false\n\n\t\tlet tokens = []\n\n\t\twhile (position < length) {\n\t\t\tlet i = text.indexOf(boundary, position);\n\t\t\tif (i == -1) {\n\t\t\t\ti = length;\n\t\t\t}\n\t\t\tvar tk = { active: act, content: text.substring(position, i) };\n\t\t\ttokens.push(tk);\n\t\t\tposition = i + boundary.length;\n\t\t\tact = !act;\n\t\t}\n\n\t\treturn tokens;\n\t}\n\n}\nvar tripartiteInstance = new Tripartite()\n\nif (typeof window != 'undefined') {\n\ttripartiteInstance.secondaryTemplateFunctionObject = window\n}\n\n\nif (typeof module !== 'undefined') {\n\tmodule.exports = tripartiteInstance\n}\nelse {\n\twindow.Tripartite = tripartiteInstance\n}\n\nif (typeof global != 'undefined') {\n\tif (!global.Tripartite) {\n\t\tglobal.Tripartite = Tripartite\n\t}\n\tif (!global.tripartite) {\n\t\tglobal.tripartite = tripartiteInstance\n\t}\n}\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))"],"names":["module","exports","constructor","conditionalExpression","dataExpression","handlingExpression","tripartite","this","parentPath","currentPath","indexOf","pparts","split","cparts","length","shift","pop","push","join","resolveDataPath","evalFunction","Function","_evaluateInContext","context","expression","dataFunctions","globalData","call","trim","resolved","ActiveElement","calculateRelativePath","evaluateInContext","template","data","destination","initialData","currentData","continueOnTripartiteError","callCount","callDepthLimit","run","callback","ourCallback","_run","_resolveHandlingExpression","defaultTemplateName","charAt","substring","templateMeta","name","parts","reverse","processParts","setTimeout","part","output","resultData","conditional","conditionalResult","undefined","Array","isArray","handlingTemplate","children","applyTemplate","child","templates","getTemplate","loadTemplate","msg","console","error","err","Error","write","value","path","e","isStream","stream","pipe","String","prototype","replace","ExecutionContext","Tripartite","options","defaultTemplate","_makeTemplate","thedata","constants","templateBoundary","templateNameBoundary","secondaryTemplateFunctionObject","loaders","dataFunction","transformationFunction","obj","tri","f","i","arguments","arg","apply","async","Promise","resolve","reject","content","addTemplate","parseTemplate","createBlank","count","done","forEach","loader","parseTemplateScript","tx","tks","tokenizeTemplateScript","ctn","token","active","stripTemplateWhitespace","txt","lastIndexOf","_createActiveElement","cd","hd","el","pt","tokenizeTemplate","t","tk","tokenizeActivePart","con","dat","han","ci","hi","tokenizeActiveAndInactiveBlocks","text","boundary","position","act","tokens","tripartiteInstance","window","g","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","globalThis","prop","hasOwnProperty"],"sourceRoot":""}